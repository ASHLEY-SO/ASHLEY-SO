<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ çŒœæ•¸å­—éŠæˆ²ï¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            background: linear-gradient(45deg, #ff9a9e 0%, #fad0c4 50%, #a8edea 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 500px;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .game-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: sparkle 4s linear infinite;
            pointer-events: none;
        }

        @keyframes sparkle {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .title {
            font-size: 2.5em;
            color: #ff6b9d;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .subtitle {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
        }

        .game-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .input-section {
            margin: 30px 0;
        }

        .guess-input {
            font-size: 2em;
            padding: 15px 20px;
            border: 3px solid #ff6b9d;
            border-radius: 15px;
            text-align: center;
            width: 150px;
            margin: 0 10px;
            outline: none;
            transition: all 0.3s ease;
        }

        .guess-input:focus {
            border-color: #667eea;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        .guess-button {
            font-size: 1.5em;
            padding: 15px 30px;
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8a80 100%);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.4);
        }

        .guess-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.6);
        }

        .guess-button:active {
            transform: translateY(0);
        }

        .feedback {
            font-size: 1.0em; /* Smaller size for high/low messages */
            font-weight: bold;
            margin: 10px 0;
            padding: 12px;
            border-radius: 12px;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s ease;
        }

        .feedback.too-high {
            background: linear-gradient(135deg, #ff7979 0%, #ff6b9d 100%);
            color: white;
        }

        .feedback.too-low {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
        }

        .feedback.correct {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
            animation: celebration 0.8s ease-in-out;
            font-size: 1.6em; /* Keep larger for success message */
            padding: 20px;
            min-height: 60px;
        }

        @keyframes celebration {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .attempts {
            font-size: 1.2em;
            color: #667eea;
            margin: 15px 0;
            font-weight: bold;
        }

        .new-game-button {
            font-size: 1.3em;
            padding: 12px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .new-game-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .hint {
            background: #fff3cd;
            color: #856404;
            padding: 20px; /* Increased padding */
            border-radius: 15px; /* Larger border radius */
            margin: 15px 0;
            border-left: 6px solid #ffc107; /* Thicker border */
            font-size: 2.2em; /* Even larger font size */
            font-weight: bold; /* Make it bold */
            text-align: center;
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.3); /* Add shadow */
        }        .score {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
            color: #2d3436;
        }

            .hint {
                font-size: 1.6em; /* Smaller on mobile but still prominent */
                padding: 15px;
            }
            
            .feedback {
                font-size: 0.9em; /* Even smaller on mobile */
                padding: 10px;
            }        @media (max-width: 600px) {
            .game-container {
                padding: 20px;
            }
            
            .title {
                font-size: 2em;
            }
            
            .guess-input {
                width: 120px;
                font-size: 1.5em;
            }
            
            .guess-button {
                font-size: 1.2em;
                padding: 12px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="title">ğŸ¯ çŒœæ•¸å­—éŠæˆ²ï¼ğŸ²</h1>
        <p class="subtitle">ä½ èƒ½çŒœå‡ºæˆ‘æƒ³çš„æ•¸å­—å—ï¼Ÿ</p>
        
        <div class="game-info" id="gameInfo">
            æˆ‘æ­£åœ¨æƒ³ä¸€å€‹ <strong>1 åˆ° 100</strong> ä¹‹é–“çš„æ•¸å­—ã€‚<br>
            è©¦è‘—çŒœçŒœçœ‹å§ï¼
        </div>
        
        <div class="input-section">
            <input type="number" id="guessInput" class="guess-input" min="1" max="100" placeholder="?">
            <br>
            <button onclick="makeGuess()" class="guess-button" id="guessButton">ğŸ¯ çŒœï¼</button>
        </div>
        
        <div class="hint" id="hint" style="display: none;">
            ğŸ’¡ <span id="hintText"></span>
        </div>
        
        <div class="attempts" id="attempts">å˜—è©¦æ¬¡æ•¸ï¼š0</div>
        
        <div class="score" id="score" style="display: none;">
            ğŸ† <span id="scoreText"></span>
        </div>
        
        <div class="feedback" id="feedback"></div>
        
        <button onclick="newGame()" class="new-game-button">ğŸ® æ–°éŠæˆ²</button>
    </div>

    <script>
        let secretNumber;
        let attempts;
        let gameWon;
        let previousGuesses = [];
        let minRange = 1;
        let maxRange = 100;
        let currentMessage = '';

        function newGame() {
            secretNumber = Math.floor(Math.random() * 100) + 1;
            attempts = 0;
            gameWon = false;
            previousGuesses = [];
            minRange = 1;
            maxRange = 100;
            
            document.getElementById('guessInput').value = '';
            document.getElementById('guessInput').disabled = false;
            document.getElementById('guessButton').disabled = false;
            document.getElementById('feedback').textContent = '';
            document.getElementById('feedback').className = 'feedback';
            document.getElementById('attempts').textContent = 'å˜—è©¦æ¬¡æ•¸ï¼š0';
            document.getElementById('hint').style.display = 'none';
            document.getElementById('score').style.display = 'none';
            document.getElementById('gameInfo').innerHTML = `æˆ‘æ­£åœ¨æƒ³ä¸€å€‹ <strong>1 åˆ° 100</strong> ä¹‹é–“çš„æ•¸å­—ã€‚<br>è©¦è‘—çŒœçŒœçœ‹å§ï¼`;
            
            currentMessage = 'æˆ‘æ­£åœ¨æƒ³ä¸€å€‹1åˆ°100ä¹‹é–“çš„æ•¸å­—ï¼Œè©¦è‘—çŒœçŒœçœ‹å§ï¼';
            
            // Focus on input
            document.getElementById('guessInput').focus();
        }

        function makeGuess() {
            if (gameWon) return;
            
            const guessInput = document.getElementById('guessInput');
            const guess = parseInt(guessInput.value);
            
            // Validate input
            if (isNaN(guess) || guess < 1 || guess > 100) {
                const message = 'ğŸ¤” è«‹è¼¸å…¥1åˆ°100ä¹‹é–“çš„æ•¸å­—ï¼';
                document.getElementById('feedback').textContent = message;
                document.getElementById('feedback').className = 'feedback';
                currentMessage = 'è«‹è¼¸å…¥1åˆ°100ä¹‹é–“çš„æ•¸å­—ï¼';
                speakText('current'); // Auto-speak feedback
                return;
            }
            
            // Check if already guessed
            if (previousGuesses.includes(guess)) {
                const message = 'ğŸ”„ ä½ å·²ç¶“è©¦é ' + guess + ' äº†ï¼è«‹è©¦è©¦å…¶ä»–æ•¸å­—ï¼';
                document.getElementById('feedback').textContent = message;
                document.getElementById('feedback').className = 'feedback';
                currentMessage = 'ä½ å·²ç¶“è©¦é' + guess + 'äº†ï¼è«‹è©¦è©¦å…¶ä»–æ•¸å­—ï¼';
                speakText('current'); // Auto-speak feedback
                return;
            }
            
            attempts++;
            previousGuesses.push(guess);
            document.getElementById('attempts').textContent = 'å˜—è©¦æ¬¡æ•¸ï¼š' + attempts;
            
            const feedback = document.getElementById('feedback');
            const hint = document.getElementById('hint');
            const hintText = document.getElementById('hintText');
            
            if (guess === secretNumber) {
                // Correct guess!
                const message = 'ğŸ‰ å¤ªæ£’äº†ï¼ä½ çŒœå°äº†ï¼ç­”æ¡ˆæ˜¯ ' + secretNumber + 'ï¼ğŸ‰';
                feedback.textContent = message;
                feedback.className = 'feedback correct';
                gameWon = true;
                currentMessage = 'å¤ªæ£’äº†ï¼ä½ çŒœå°äº†ï¼ç­”æ¡ˆæ˜¯' + secretNumber;
                
                // Show score
                const score = document.getElementById('score');
                const scoreText = document.getElementById('scoreText');
                let rating = '';
                if (attempts <= 3) rating = 'å¤ªå²å®³äº†ï¼ğŸŒŸ';
                else if (attempts <= 6) rating = 'å¾ˆæ£’ï¼ğŸ‘';
                else if (attempts <= 10) rating = 'åšå¾—å¥½ï¼ğŸ‘';
                else rating = 'ä½ æˆåŠŸäº†ï¼ğŸ¯';
                
                const scoreMessage = rating + ' ä½ ç”¨äº† ' + attempts + ' æ¬¡å°±çŒœä¸­äº†ï¼';
                scoreText.textContent = scoreMessage;
                score.style.display = 'block';
                currentMessage += 'ï¼Œ' + scoreMessage;
                
                document.getElementById('guessInput').disabled = true;
                document.getElementById('guessButton').disabled = true;
                
                speakText('current'); // Auto-speak success message
                
            } else if (guess < secretNumber) {
                // Too low - update range
                minRange = Math.max(minRange, guess + 1);
                const message = 'ğŸ“ˆ å¤ªå°äº†ï¼è©¦è©¦æ›´å¤§çš„æ•¸å­—ï¼';
                feedback.textContent = message;
                feedback.className = 'feedback too-low';
                
                // Show updated range hint
                const hintMessage = `è©¦è©¦ ${minRange} åˆ° ${maxRange} ä¹‹é–“çš„æ•¸å­—`;
                hintText.textContent = hintMessage;
                hint.style.display = 'block';
                currentMessage = 'å¤ªå°äº†ï¼è©¦è©¦æ›´å¤§çš„æ•¸å­—ï¼' + hintMessage;
                
                speakText('current'); // Auto-speak feedback
                
            } else {
                // Too high - update range
                maxRange = Math.min(maxRange, guess - 1);
                const message = 'ğŸ“‰ å¤ªå¤§äº†ï¼è©¦è©¦æ›´å°çš„æ•¸å­—ï¼';
                feedback.textContent = message;
                feedback.className = 'feedback too-high';
                
                // Show updated range hint
                const hintMessage = `è©¦è©¦ ${minRange} åˆ° ${maxRange} ä¹‹é–“çš„æ•¸å­—`;
                hintText.textContent = hintMessage;
                hint.style.display = 'block';
                currentMessage = 'å¤ªå¤§äº†ï¼è©¦è©¦æ›´å°çš„æ•¸å­—ï¼' + hintMessage;
                
                speakText('current'); // Auto-speak feedback
            }
            
            // Clear input and focus for next guess
            guessInput.value = '';
            guessInput.focus();
        }

        function speakText(type) {
            if ('speechSynthesis' in window) {
                // Cancel any ongoing speech
                speechSynthesis.cancel();
                
                let textToSpeak = '';
                if (type === 'current') {
                    textToSpeak = currentMessage || 'æˆ‘æ­£åœ¨æƒ³ä¸€å€‹1åˆ°100ä¹‹é–“çš„æ•¸å­—ï¼Œè©¦è‘—çŒœçŒœçœ‹å§ï¼';
                }
                
                const utterance = new SpeechSynthesisUtterance(textToSpeak);
                utterance.lang = 'zh-HK'; // Hong Kong Cantonese
                utterance.rate = 0.8; // Slightly slower for children
                utterance.pitch = 1.1; // Slightly higher pitch for friendliness
                
                // Try to find a Cantonese voice (Hong Kong)
                const voices = speechSynthesis.getVoices();
                const cantoneseVoice = voices.find(voice => 
                    voice.lang.includes('zh-HK') || 
                    voice.lang.includes('yue') ||
                    voice.name.includes('Hong Kong') ||
                    voice.name.includes('Cantonese') ||
                    voice.name.includes('å»£æ±è©±') ||
                    voice.name.includes('ç²µèª')
                );
                
                if (cantoneseVoice) {
                    utterance.voice = cantoneseVoice;
                    console.log('Using Cantonese voice:', cantoneseVoice.name);
                } else {
                    // Fallback to any Chinese voice available
                    const chineseVoice = voices.find(voice => 
                        voice.lang.includes('zh') || 
                        voice.name.includes('Chinese') || 
                        voice.name.includes('ä¸­æ–‡')
                    );
                    if (chineseVoice) {
                        utterance.voice = chineseVoice;
                        console.log('Using fallback Chinese voice:', chineseVoice.name);
                    }
                }
                
                speechSynthesis.speak(utterance);
            } else {
                alert('æŠ±æ­‰ï¼Œæ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³åŠŸèƒ½ã€‚');
            }
        }

        // Load voices when available and log available voices for debugging
        speechSynthesis.onvoiceschanged = function() {
            const voices = speechSynthesis.getVoices();
            console.log('Available voices:');
            voices.forEach((voice, index) => {
                if (voice.lang.includes('zh') || voice.name.includes('Chinese') || voice.name.includes('Hong Kong') || voice.name.includes('Cantonese')) {
                    console.log(`${index}: ${voice.name} (${voice.lang})`);
                }
            });
        };

        // Allow Enter key to submit guess
        document.getElementById('guessInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                makeGuess();
            }
        });

        // Start the game
        newGame();
        
        // Speak welcome message
        setTimeout(() => {
            currentMessage = 'æ­¡è¿ä¾†åˆ°çŒœæ•¸å­—éŠæˆ²ï¼æˆ‘æ­£åœ¨æƒ³ä¸€å€‹1åˆ°100ä¹‹é–“çš„æ•¸å­—ï¼Œè©¦è‘—çŒœçŒœçœ‹å§ï¼';
        }, 500);
    </script>
</body>
</html>
